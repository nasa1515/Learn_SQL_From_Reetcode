## [1795. Rearrange Products Table]


### Table: Products


| Column Name | Type    |
|-------------|---------|
| product_id  | int     |
| store1      | int     |
| store2      | int     |
| store3      | int     |

product_id is the primary key (column with unique values) for this table.  
Each row in this table indicates the product's price in 3 different stores: store1, store2, and store3.  
If the product is not available in a store, the price will be null in that store's column.  
 
## Problem 

Write a solution to rearrange the Products table so that each row has (product_id, store, price).   
If a product is not available in a store, do not include a row with that product_id and store combination in the result table.  

Return the result table in any order.  

The result format is in the following example.  

 

## Example 1:

### Input: 

Products table:


| product_id | store1 | store2 | store3 |
|------------|--------|--------|--------|
| 0          | 95     | 100    | 105    |
| 1          | 70     | null   | 80     |

### Output: 

| product_id | store  | price |
|------------|--------|-------|
| 0          | store1 | 95    |
| 0          | store2 | 100   |
| 0          | store3 | 105   |
| 1          | store1 | 70    |
| 1          | store3 | 80    |

### Explanation: 
* Product 0 is available in all three stores with prices 95, 100, and 105 respectively.
* Product 1 is available in store1 with price 70 and store3 with price 80. The product is not available in store2.



<br/>

---

<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>


## ğŸŸ¢ ë‹µì•ˆ (SQL Solution)

```sql
select product_id, 'store1' as store, store1 as price
from Products 
where store1 is not null
union all
select product_id, 'store2' as store, store2 as price
from Products 
where store2 is not null
union all
select product_id, 'store3' as store, store3 as price
from Products 
where store3 is not null
ORDER BY 1 
```

## ğŸŸ¢ í’€ì´ (Discription)
`union`ìœ¼ë¡œ ê°ì ì»¬ëŸ¼ì˜ ê°’ì„ UNPOVOT í•œ ë°ì´í„°ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì§‘ê³„í•´ì„œ í•´ê²°í–ˆìŠµë‹ˆë‹¤.   
ë¬¸ì œì—ì„œ ë‚˜ì˜¨ ì¡°ê±´ì— ë”°ë¼ì„œ, í’€ì´ë¥¼ ëŒ€ì‹ í•˜ê² ìŠµë‹ˆë‹¤. 

1. `store1,store2,store3`ì»¬ëŸ¼ ë³„ë¡œ `Null` ê°’ì„ ì œì™¸í•œ, ìœ ë‹ˆí¬í•œ ê°€ê²©ì„ ê°€ì§„ ì»¬ëŸ¼ì„ ì§‘ê³„í•˜ì‹œì˜¤.
2. ê²°êµ­ store1 ì»¬ëŸ¼ ë³„ë¡œ UNPIVOTì„ í•˜ë©´ ë˜ëŠ”ë°, mysqlì—ëŠ” UNPIVOTì´ ì—†ìŠµë‹ˆë‹¤. (ë”°ë¼ì„œ Unionìœ¼ë¡œ ì²˜ë¦¬ í–ˆìŠµë‹ˆë‹¤.)  
`'store1' as store, store1 as price`ë¡œ, ê° store1ê³¼ price ì»¬ëŸ¼ì„ ì¶”ê°€ í•œë’¤, Union í–ˆìŠµë‹ˆë‹¤. 

## ğŸŸ¢ UNPIVOTìœ¼ë¡œ í’€ì´ (Discription)

```sql
SELECT product_id, store, price
FROM Products
UNPIVOT
(
	price FOR store in (store1,store2,store3)
) AS TEMP
```