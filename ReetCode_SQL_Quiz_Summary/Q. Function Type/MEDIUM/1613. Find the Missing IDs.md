## [1613. Find the Missing IDs]  


### Table: Customers


| Column Name   | Type    |
|---------------|---------|
| customer_id   | int     |
| customer_name | varchar |

customer_id is the column with unique values for this table.  
Each row of this table contains the name and the id customer.  
 
## Problem 

Write a solution to find the missing customer IDs.  
The missing IDs are ones that are not in the Customers table but are in the range between 1 and the maximum customer_id present in the table.

Notice that the maximum customer_id will not exceed 100.  

Return the result table ordered by ids in ascending order.  

The result format is in the following example.  

 

## Example 1:

### Input: 

Customers table:

| customer_id | customer_name |
|-------------|---------------|
| 1           | Alice         |
| 4           | Bob           |
| 5           | Charlie       |

### Output: 

| ids |
|-----|
| 2   |
| 3   |

### Explanation:   

* The maximum customer_id present in the table is 5, so in the range [1,5], IDs 2 and 3 are missing from the table.  



<br/>

---

<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>


## ğŸŸ¢ ë‹µì•ˆ (SQL Solution)

```sql
WITH RECURSIVE CTE (cte_idx) AS (
    SELECT 1 AS cte_idx
    UNION ALL
    SELECT cte_idx + 1 
    FROM CTE 
    WHERE cte_idx < (SELECT MAX(customer_id) FROM Customers)
)

SELECT cte_idx AS ids
FROM CTE
WHERE cte_idx NOT IN (SELECT customer_id FROM Customers)
```

## ğŸŸ¢ í’€ì´ (Discription)

ë¬¸ì œì˜ ì¡°ê±´ì— ë§ê²Œ, ì•„ë˜ì˜ íŒíŠ¸ë“¤ì„ ë°œê²¬í•˜ê²Œ ëœë‹¤ë©´, ì‰½ê²Œ ë¡œì§ì„ êµ¬í˜„í•´ì„œ ë¬¸ì œë¥¼ í’€ì´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  

* `Customers` í…Œì´ë¸”ì— ì¡´ì¬í•˜ëŠ” í…Œì´ë¸” ì¤‘, 1~ê°€ì¥ í° customer_idê¹Œì§€ì˜ ë²”ìœ„ ì¤‘ ëˆ„ë½ëœ ìˆ«ìë¥¼ ì°¾ì•„ì•¼ í•©ë‹ˆë‹¤.  
* í…Œì´ë¸”ì€ `Customers` í•˜ë‚˜ë§Œ ì¡´ì¬í•©ë‹ˆë‹¤.  
* ë¹ˆ ë°ì´í„°ë¥¼ ìƒì„±í•´ì•¼ í•©ë‹ˆë‹¤.  (ì¬ê·€)  


<br/>

---

#### STEP.1 [CREATE RECURSIVE CTE]  


```sql
WITH RECURSIVE CTE (cte_idx) AS (
    SELECT 1 AS cte_idx
    UNION ALL
    SELECT cte_idx + 1 
    FROM CTE 
    WHERE cte_idx < (SELECT MAX(customer_id) FROM Customers)
)
```

| cte_idx |
| ------- |
| 1       |
| 2       |
| 3       |
| 4       |
| 5       |

ë‹¤ìŒê³¼ ê°™ì´, `RECURSIVE`ë¥¼ ì‚¬ìš©í•´ì„œ, ì¬ê·€ì ìœ¼ë¡œ ë²”ìœ„ ë°ì´í„°ë¥¼ ìƒì„±í•œ `CTE`ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.  

* ì´ˆê¸° ì„¤ì • ì¿¼ë¦¬ : `SELECT 1 AS cte_idx`
* ì¬ê·€ ì¿¼ë¦¬ : `SELECT cte_idx + 1`   
* ë°˜ë³µ ì¢…ë£Œ : `WHERE cte_idx < (SELECT MAX(customer_id) FROM Customers)`  

<br/>

#### STEP.2 [Data Filtering]  

```sql
SELECT cte_idx AS ids
FROM CTE
WHERE cte_idx NOT IN (SELECT customer_id FROM Customers)
```  

| ids |
| --- |
| 2   |
| 3   |

ìƒì„±í•œ, CTE í…Œì´ë¸”ì„ ê¸°ì¤€ìœ¼ë¡œ `not in`ìœ¼ë¡œ ë²”ìœ„ì— ì¡´ì¬í•˜ì§€ ì•Šì€ ë°ì´í„°ë¥¼ ì¶œë ¥í•˜ë©´ ì •ë‹µì…ë‹ˆë‹¤.